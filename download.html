<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Delice Client | Установка</title>

  <link rel="icon" href="img/logo.png" type="image/png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Синяя палитра */
      --accent: #0066ff;
      --accent-glow: rgba(0, 102, 255, 0.3);
      --text-main: #ffffff;
      --text-dim: rgba(255, 255, 255, 0.7);
      --card-bg: rgba(255, 255, 255, 0.03);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-user-select: none; user-select: none; }

    body {
      background-color: #02040a;
      color: var(--text-main);
      font-family: 'Inter', sans-serif;
      height: 100vh;
      overflow: hidden;
    }

    .hero-bg {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: url('img/downloadbg.jpg') center/cover no-repeat;
      z-index: -3; transition: transform 0.1s ease-out; transform: scale(1.1);
    }

    #tsparticles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
    }

    .overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      /* Глубокий синеватый градиент */
      background: radial-gradient(circle at center, rgba(0,10,40,0.2) 0%, rgba(2,4,10,0.85) 100%);
      z-index: -1;
    }

    nav {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      padding: 0 8%;
      height: 70px;
      background: rgba(10, 10, 15, 0.4);
      backdrop-filter: blur(15px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      position: fixed; top: 0; width: 100%; z-index: 100;
      gap: 50px;
    }

    .logo-img { height: 32px; width: auto; display: block; }

    .nav-links { display: flex; gap: 30px; align-items: center; }
    .nav-links a {
      text-decoration: none; color: var(--text-dim);
      font-size: 0.9rem; font-weight: 500; transition: 0.2s;
      line-height: 1;
    }
    .nav-links a:hover { color: #fff; }

    .download-container {
      height: 100vh; display: flex; justify-content: center; align-items: center;
      position: relative; z-index: 10;
    }

    .download-card {
      background: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(30px);
      padding: 50px; border-radius: 32px;
      max-width: 500px; width: 90%;
      text-align: center;
      transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
      display: flex; flex-direction: column; align-items: center;
    }

    .download-card.finished {
      transform: scale(1.02);
      border-color: var(--accent);
      box-shadow: 0 0 50px var(--accent-glow);
    }

    .status-badge {
      display: inline-flex; align-items: center; gap: 8px;
      background: rgba(255,255,255,0.05);
      padding: 6px 14px; border-radius: 100px; margin-bottom: 20px;
    }

    .dot {
      width: 6px; height: 6px; background: var(--accent);
      border-radius: 50%; animation: pulse 1.5s infinite;
    }

    h1 {
      font-size: 2.8rem; font-weight: 800; margin-bottom: 12px;
      line-height: 1.1; min-height: 3.2rem;
      display: flex; align-items: center; justify-content: center;
    }

    .desc {
      color: var(--text-dim); margin-bottom: 35px; font-size: 1rem;
      line-height: 1.5; min-height: 3rem;
    }

    .dl-wrapper {
      position: relative; width: 100%; height: 75px;
      background: rgba(255,255,255,0.03);
      border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);
      cursor: pointer; overflow: hidden; transition: 0.4s;
    }

    .dl-wrapper:hover:not(.active) {
      background: rgba(255,255,255,0.06);
      border-color: var(--accent);
    }

    .dl-wrapper.active {
      cursor: default;
      box-shadow: 0 0 30px var(--accent-glow);
    }

    .dl-content {
      position: absolute; inset: 0; display: flex;
      justify-content: center; align-items: center;
      z-index: 10; font-weight: 700; font-size: 1.1rem;
    }

    #percentText {
      position: absolute; right: 30px; opacity: 0;
      transition: opacity 0.3s; font-family: monospace;
      color: var(--text-dim);
    }

    .progress-fill {
      position: absolute; left: 0; top: 0; height: 100%;
      width: 0%; background: linear-gradient(90deg, var(--accent), #00d4ff);
    }

    .shimmer {
      position: absolute; inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: translateX(-100%);
    }

    .active .shimmer { animation: shimmer 2s infinite; }

    .log-text {
      margin-top: 25px; font-family: monospace; font-size: 0.75rem;
      color: var(--accent); min-height: 1.2em; text-transform: uppercase;
      letter-spacing: 1px;
    }

    @keyframes pulse { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }
    @keyframes shimmer { 100% { transform: translateX(100%); } }

    footer { position: fixed; bottom: 30px; width: 100%; text-align: center; color: var(--text-dim); font-size: 0.8rem; }
  </style>
</head>
<body oncontextmenu="return false;">

<div id="tsparticles"></div>
<div class="hero-bg" id="bg"></div>
<div class="overlay"></div>

<nav>
  <a href="index.html">
    <img src="img/logo.png" alt="Logo" class="logo-img">
  </a>
  <div class="nav-links">
    <a href="https://discord.gg/xF9h8yMk2r">Поддержка</a>
    <a href="faq.html">Частые вопросы</a>
  </div>
</nav>

<main class="download-container">
  <div class="download-card" id="card">
    <div class="status-badge">
      <div class="dot"></div>
      <span style="font-size: 0.7rem; font-weight: 700; letter-spacing: 1px;">DELICE RECODE</span>
    </div>

    <h1 id="mainTitle">Установка</h1>
    <p class="desc" id="mainDesc">Нажмите кнопку, чтобы запустить процесс облачной сборки вашего клиента.</p>

    <div class="dl-wrapper" id="dlBox">
      <div class="dl-content">
        <span id="btnText">Скачать клиент</span>
        <span id="percentText">0%</span>
      </div>
      <div class="progress-fill" id="fill"></div>
      <div class="shimmer"></div>
    </div>

    <div class="log-text" id="logLine">Ожидание команды...</div>
  </div>
</main>

<footer>© 2026 Delice Project. Разработано с любовью.</footer>

<script src="https://cdn.jsdelivr.net/npm/tsparticles-all@2.12.0/tsparticles.all.bundle.min.js"></script>

<script>
  // Инициализация синих частиц
  (async () => {
    await tsParticles.load("tsparticles", {
      particles: {
        number: { value: 50, density: { enable: true, area: 800 } },
        color: { value: "#0066ff" },
        shape: { type: "circle" },
        opacity: { value: 0.3, random: true },
        size: { value: { min: 1, max: 2 } },
        links: {
          enable: true,
          distance: 150,
          color: "#0066ff",
          opacity: 0.15,
          width: 1
        },
        move: { enable: true, speed: 1, direction: "none", outModes: { default: "out" } }
      },
      interactivity: {
        events: { onHover: { enable: true, mode: "grab" } },
        modes: { grab: { distance: 200, links: { opacity: 0.4 } } }
      },
      detectRetina: true
    });
  })();

  const bg = document.getElementById('bg');
  const card = document.getElementById('card');
  const dlBox = document.getElementById('dlBox');
  const fill = document.getElementById('fill');
  const btnText = document.getElementById('btnText');
  const percentText = document.getElementById('percentText');
  const logLine = document.getElementById('logLine');
  const mainTitle = document.getElementById('mainTitle');
  const mainDesc = document.getElementById('mainDesc');

  document.addEventListener('mousemove', (e) => {
    const x = (e.clientX - window.innerWidth / 2) * 0.01;
    const y = (e.clientY - window.innerHeight / 2) * 0.01;
    bg.style.transform = `scale(1.1) translate(${x}px, ${y}px)`;
  });

  const logs = ["Инициализация...", "Проверка данных...", "Загрузка ассетов...", "Сборка ядра...", "Завершение..."];

  dlBox.onclick = function() {
    if (this.classList.contains('active')) return;
    this.classList.add('active');
    btnText.innerText = "Загрузка";
    percentText.style.opacity = "1";
    let progress = 0;
    const interval = setInterval(() => {
      progress += Math.random() * 2.5;
      if (progress >= 100) {
        progress = 100;
        clearInterval(interval);
        finishDownload();
      }
      fill.style.width = progress + "%";
      percentText.innerText = Math.floor(progress) + "%";
      const logIndex = Math.min(Math.floor((progress / 100) * logs.length), logs.length - 1);
      logLine.innerText = "> " + logs[logIndex];
    }, 50);
  };

  function finishDownload() {
    btnText.innerText = "Готово";
    percentText.style.opacity = "0";
    card.classList.add('finished');
    logLine.style.color = "#00ff88"; // Оставляем зеленым для успеха или можно тоже на голубой
    logLine.innerText = "✓ Файл успешно передан";
    mainTitle.innerText = "Приятной игры!";
    mainDesc.innerText = "Инсталлятор загружен. Запустите его для завершения установки.";
    setTimeout(() => {
      const fileUrl = 'https://www.dropbox.com/scl/fi/b416xa3pw0lbkbd828zb1/Delice-Client-1.3.rar?rlkey=er4iukl4erz6g0hkmvj6264sz&st=3m028eax&dl=1';
      const link = document.createElement('a');
      link.href = fileUrl;
      link.setAttribute('download', 'DeliceInstaller.exe');
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }, 500);
  }

  document.onkeydown = function(e) {
    if (e.keyCode == 123 || (e.ctrlKey && (e.keyCode == 85 || e.keyCode == 73))) return false;
  };
</script>
</body>
</html>
